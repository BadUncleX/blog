---
layout: post
title:  " 100天第二天 golang 指针 slice map function"
date:   2018-07-02 21:23:36 +0800
categories: blockchain 100days
typora-copy-images-to: ../assets/images/2018-07
typora-root-url: ../../blog_alexcode
---
<h2>Table of contents</h2>
* TOC
{:toc}
> you can see the code on [github](https://github.com/foxlog/practisinggolang)

## pointer 指针



```go
func main() {
   i, j := 42, 2900

   p := &i

   *p = 420

   fmt.Println("i = ", i)
   p = &j
   *p = 29000

   fmt.Println("j = ", j)
   
}
```





## 结构体 struct



```go
type Books struct {
	title string
	author string
	subject string
	book_id int
}

func main() {
	var book1 Books
	book2 := Books{"golang", "alex", "Golang", 2000}

	book3 := Books{"clojure", "Jane", "Clojure is great", 4000}

	book1.title = "C++"
	book1.author = "Jack"
	book1.subject = "Linux Development"
	book1.book_id = 3000
	printBook(book1)
	printBook(book2)

	fmt.Println("after invoke , the new title value: ", book1.title)

	printBookwithPointer(&book3)
	fmt.Println("after invoke pointer , the new title value: ", book3.title)


}


func printBook( book Books ) {
	//这里修改是value修改, 不影响外部
	book.title = "Changed!"
	fmt.Printf( "Book title : %s\n", book.title);
	fmt.Printf( "Book author : %s\n", book.author);
	fmt.Printf( "Book subject : %s\n", book.subject);
	fmt.Printf( "Book book_id : %d\n", book.book_id);
}

func printBookwithPointer( book *Books ) {
	//指针变量, 支持修改
	book.title = book.title + " Hello haha"
	fmt.Printf( "Book title : %s\n", book.title);
	fmt.Printf( "Book author : %s\n", book.author);
	fmt.Printf( "Book subject : %s\n", book.subject);
	fmt.Printf( "Book book_id : %d\n", book.book_id);
}


//字面量
func strucliterals()  {
	var(
		v1 = Books{"golang", "alex", "Golang", 2000} // type Books
		v2 = Books{title: "Scala"}  // bookid: 0  is implicit
		v3 = Books{title: "php", author:"Jack"} // bookid: 0  is implicit
		v4 = Books{} // all valus is default
	)

	fmt.Println(v1, v2, v3, v4)

}
```



## slice

```go
func main() {
   names := [4]string{
      "John",
      "Paul",
      "George",
      "Ringo",
   }

   fmt.Println(names)

   sliceA := names[0:2]
   sliceB := names[1:3]
   fmt.Println(sliceA, sliceB)

   //changed value by slice
   sliceB[0] = "XXX" // 影响背后的array
   fmt.Println("after changed value: ", sliceA ,sliceB)
   fmt.Println("names: ", names)


}
```



```go
//add element to slice
func appendtoslice() {
   var s []int
   printSlice(s)

   // append works on nil slices.
   s = append(s, 0)
   printSlice(s)

   // The slice grows as needed.
   s = append(s, 1)
   printSlice(s)

   // We can add more than one element at a time.
   s = append(s, 2, 3, 4)
   printSlice(s)
}

func printSlice(s []int)  {
   fmt.Printf("len=%d cap=%d %v \n", len(s), cap(s), s)
   
}
```



## ranges

```go
var pow = []int{1, 2, 4, 8, 16, 32, 64, 128}

func main() {

   for i, v := range pow{
      fmt.Printf("2 ** %d = %d \n", i, v)
   }

   //range skip
   for _, value := range pow{
      fmt.Printf("%d \n", value)
   }


}
```



## map

```go
type Vertex struct {
   Last, Long float64
}


var m = map[string]Vertex{
   "Bell Labs" : Vertex{
      40.68433, -74.39967,
   },
   "Google" : Vertex{
      37.42202, -122.08408,
   },
}

func main() {
   fmt.Println(m)
}
```



```go
//update map
func updateMap() {
   m := make(map[string]int)

   m["Answer"] = 42
   fmt.Println("The value:", m["Answer"])

   m["Answer"] = 48
   fmt.Println("The value:", m["Answer"])

   delete(m, "Answer")
   fmt.Println("The value:", m["Answer"])

   v, ok := m["Answer"]
   fmt.Println("The value:", v, "Present?", ok)
}
```



## function as parameter

```go
type fn func(int)

func myfn1(i int) {
   fmt.Printf("\ni is %v", i)
}

func myfn2(i int) {
   fmt.Printf("\ni is %v", i)
}
func test(f fn, val int) {
   f(val)
}

func main() {
   test(myfn1, 123)
   test(myfn2, 321)
}
```